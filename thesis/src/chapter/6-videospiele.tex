\chapter{Speichersysteme in Videospielen}\label{ch:videospiele}

\section{Minecraft}
Zusammenfassung über Minecraft (Für Leute die das Spiel nicht kennen).
\begin{itemize}
    \item Survival Spiel
    \item 3D Welt die aus Blöcken besteht
    \item Unter meistgespielten Spielen
\end{itemize}

In diesem Kapitel wurde die Minecraft Version 1.16 angeschaut. 
Bei neueren Versionen kann das Speichersystem bereits etwas anders aussehen. Um an den Sourcecode zu kommen wurde das Tool 
\url{https://github.com/Hexeption/MCP-Reborn/tree/1.16} verwendet. Aus rechtlichen Gründen darf kein
Sourcecode gezeigt werden.

\subsection{Daten}
Welche Klassen gibt es bei Minecraft (Blöcke, Chunks,...) und welche Daten 
beinhalten diese.\\
\\
Blöcke mit YZX Position (einfacher zu komprimieren), "BlockStates", etc.\\
BlockState über "Palette" Liste gespeichert (Welche BlockIDs welchen Zustand haben).\\
$\Rightarrow{}$ ChunkSerializer.java:write()\\

Entity (z.B. Player) mit ID, Position, Motion, Rotation, OnGround, CustomName, ...\\
$\Rightarrow{}$ Entity.java:writeWithoutTypeID()\\

\url{https://minecraft.fandom.com/wiki/Chunk_format}

\subsection{Ordnerstruktur}
Ordner:
\begin{itemize}
    \item /world/data
    \item /world/players: Player Data
    \item /world/DIM-1: Nether world
    \item /world/DIM1: End world
    \item /world/region: Overworld regions
    \item /world/DIM-1/region: Nether regions
    \item /world/DIM1/region: End regions
\end{itemize}

Dateien:
\begin{itemize}
    \item level.dat: Allgemeine Spieldaten
    \item $[$playeruuid$]$.dat: Spielerdaten
    \item $[$region$]$.mca: Regionen in /region Ordner
\end{itemize}

\url{https://wiki.vg/Map_Format}\\
\url{https://minecraft.fandom.com/wiki/Java_Edition_level_format}

\subsection{Speicherformate}
\begin{itemize}
    \item Minecraft Anvil (MCA): Speichern von Chunk Daten (RegionFileCache.java:loadFile(), SaveFormat.java:convertRegions())
    \item Named Binary Tag (NBT): .dat-Endung $\Rightarrow$ level.dat, Playerdata, ... (CompoundNBT in vielen Dateien und NBT Folder)
    \item JavaScript Object Notation (JSON): Speichern von Texte (Bücher, Schilder, Label)
\end{itemize}

\url{https://docs.fileformat.com/game/mca/}\\
\url{https://wiki.vg/NBT}\\
\url{https://minecraft.fandom.com/wiki/JSON}

\subsection{Datenaufteilung}
Chunks, Regions und Level. 

\begin{itemize}
    \item Section: Bereich von 16x16x16-Blöcken
    \item Chunk: Bereich von 16x16x$[$Welt Höhenlimit$]$ Blöcken (Bei Minecraft 1.16 Höhenlimit = 256 $\Rightarrow{}$ Chunk = 16xSections (Chunk.java:sections))
    \item Region: Gruppierung von Chunks in einem 32x32 Blöcke Gebiet
    \item Level: (Theoretisch, aber nicht praktisch) unendliche Sammlung von Chunks gespeichert als regions
\end{itemize}

\url{https://minecraft.fandom.com/wiki/Chunk_format}
\url{https://wiki.vg/Region_Files}

\subsection{Speichervorgänge}

Speicherung, wenn:
\begin{itemize}
    \item Neue Welt generiert (Minecraft.java:createWorld())
    \item Pause-Taste wird gedrückt (IntegratedServer.java:tick())
    \item Chunks werden entladen (Spieler zu weit weg)
    \item Alle 5 Minuten
\end{itemize}

\url{https://minecraft.fandom.com/de/wiki/Spielstand-Speicherung}

\subsection{Ladevorgänge}
%-----------------------------------------------------------------------



%-----------------------------------------------------------------------
\section{Terraria}
\subsection{Daten}
Welche Klassen gibt es bei Terraria (Blöcke, Chunks,...) und welche Daten 
beinhalten diese.

\subsection{Ordnerstruktur}

\subsection{Speicherformate}
World-Dateien, Player-Dateien, Konfigurationsdateien 

\subsection{Datenaufteilung}
Kein Chunksystem, alles in einer Datei gespeichert. Aber Inventar, Position
usw. werden in verschiedenen Daten gespeichert.

\subsection{Speichervorgänge}

\subsection{Ladevorgänge}
%-----------------------------------------------------------------------



%-----------------------------------------------------------------------
\section{Half-Life}
\subsection{Ordnerstruktur}
\subsection{Daten}
Welche Klassen gibt es bei Half-Life (Blöcke, Chunks,...) und welche Daten 
beinhalten diese.

\subsection{Datenaufteilung}
Half-Life benutzt ein Chunk System.

\subsection{Speicherformate}
BSP-Dateien, MDL-Dateien, WAD-Dateien, SFX-Dateien, CFG-Dateien.

\subsection{Speichervorgänge}

\subsection{Ladevorgänge}